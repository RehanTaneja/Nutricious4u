{
  "token_functions": {
    "get_user_notification_token": {
      "status": "passed",
      "details": [
        "\u2705 Function exists",
        "\u2705 Checks isDietician flag",
        "\u2705 Returns None for dietician accounts",
        "\u2705 Retrieves token from Firestore",
        "\u2705 Validates token format"
      ]
    },
    "get_dietician_notification_token": {
      "status": "passed",
      "details": [
        "\u2705 Function exists",
        "\u2705 Queries for dietician account",
        "\u2705 Validates dietician flag"
      ]
    }
  },
  "message_notifications": {
    "user_dashboard": {
      "status": "passed",
      "details": [
        "\u2705 User handler exists for messages from dietician",
        "\u2705 Shows alert for new messages",
        "\u2705 Provides navigation to messages"
      ]
    },
    "dietician_dashboard": {
      "status": "passed",
      "details": [
        "\u2705 Dietician handler exists for messages from users"
      ]
    },
    "backend": {
      "status": "passed",
      "details": [
        "\u2705 Backend endpoint exists",
        "\u2705 Routes based on sender role",
        "\u2705 Sets fromDietician flag correctly",
        "\u2705 Sets fromUser flag correctly"
      ]
    }
  },
  "appointment_notifications": {
    "user_dashboard": {
      "status": "passed",
      "details": [
        "\u2705 User appointment handler exists",
        "\u2705 Handles confirmed appointments",
        "\u2705 Handles cancelled appointments"
      ]
    },
    "dietician_dashboard": {
      "status": "passed",
      "details": [
        "\u2705 Dietician appointment handler exists",
        "\u2705 Handles both scheduled and cancelled"
      ]
    },
    "backend_user_notification": {
      "status": "passed",
      "details": [
        "\u2705 Checks for scheduled appointments",
        "\u2705 Finds user by email",
        "\u2705 Gets user notification token",
        "\u2705 Sends confirmed appointment notification to user"
      ]
    },
    "backend_dietician_notification": {
      "status": "passed",
      "details": [
        "\u2705 Gets dietician token",
        "\u2705 Sends appointment notification to dietician"
      ]
    }
  },
  "diet_notifications_unchanged": {
    "new_diet_handler": {
      "status": "passed",
      "details": [
        "\u2705 new_diet handler exists",
        "\u2705 Shows auto extraction popup",
        "\u2705 Refreshes diet data"
      ]
    },
    "diet_reminder_handler": {
      "status": "passed",
      "details": [
        "\u2705 diet_reminder handler exists"
      ]
    },
    "backend_diet_upload": {
      "status": "passed",
      "details": [
        "\u2705 Diet upload endpoint exists",
        "\u2705 Gets user token for new diet notification",
        "\u2705 Sends new_diet notification to user",
        "\u2705 Gets dietician token",
        "\u2705 Sends diet_upload_success to dietician"
      ]
    }
  },
  "notification_isolation": {
    "status": "warning",
    "details": [
      "\u2705 Exactly 1 new_diet handler in User Dashboard",
      "\u2705 Message handler exists in User Dashboard",
      "\u2705 Appointment handler exists in User Dashboard",
      "\u26a0\ufe0f  Only 0 if blocks found for notifications"
    ]
  }
}